%===============================================================================
\chapter{Úvod}

Dnešní doba poskytuje mnoho možností, jak si svůj vyvíjený produkt, nebo například jen pouhou hypotézu toho, jak by nějaký systém mohl fungovat, namodelovat a provést na tomto modelu simulaci. Z~takto provedené simulace získáme představu o~tom, jak se náš produkt chová. A~pro tyto simulace je potřeba zvolit vhodný simulační nástroj. Vhodně zvolený simulační nástroj může totiž ušetřit nemalé prostředky při uvedení produktu na trh právě díky proběhnutí simulací a odlazením celého procesu chodu produktu. Proto je vhodné věnovat čas simulaci dostatečný čas. Simulační nástroje jsou implementovány nad různými simulačními jazyky, ale pro účely práce byly zvoleny primárně dvě hlavní rodiny jazyků - MATLAB a Modelica, případně jazyky jim podobné. Zároveň je pro porovnání vybrán jazyk Python s~rozšířeními Scipy a Numpy, který není příbuzný s~výše uvedenými jazyky.

Cílem této bakalářské práce je provést srovnání volně dostupných simulačních nástrojů. Pro účely porovnání budou implementovány simulační modely v~různých simulačních jazycích. Tyto modely budou následně porovnány pomocí porovnávací metodiky a získané výsledky srovnání budou použity k~pojednání o~vhodnosti použití implementovaných modelů pro zvolené nástroje.

V~kapitole \ref{kapitola2} budou popsány a vysvětleny důležité pojmy potřebné pro pochopení problematiky modelování a simulací. Zároveň v~této kapitole bude vysvětlena problematiky porovnání a popsána zvolená porovnávací metodika. Dále bude kapitola pojednávat o~použitých simulačních nástrojích a jejich jazicích. Kapitola \ref{kapitola4} bude obsahovat popis implementovaných simulačních modelů pro simulační nástroje. V~následující kapitole \ref{kapitola5} bude popsán průběh porovnání nástrojů. Poslední kapitola \ref{kapitola6} bude obsahovat výsledky porovnání simulačních nástrojů zároveň s~popisem způsobilosti použitých modelů pro využité nástroje.

\chapter{Modelování a simulace}
\label{kapitola2}

Modelování a simulace jsou dnes již nedílnou součástí vědy a výzkumu. V~této kapitole se věnuji popisu pojmů nutných k~pochopení základní problematiky modelování. Dále je zde možné najít popis problematiky porovnávání a porovnávací metodiku.

\section{Problematika modelování a simulací}
Jelikož jsou modelování a simulace velmi komplexní disciplíny, je nutné si stanovit, alespoň v~jednoduchosti, základní pojmy, které jsou v~rámci této práce využívány.

\subsection{Modelování a model}
\label{modelovani}
Modelování je vědecká disciplína, při které dochází k~popisu \textit{systému} z~reálného světa a získání všech možných informací, které k~tomuto procesu máme. Ze získaných poznatků se vytvoří model. V~rámci zkoumání získaných informací je nutná analýza možných nepochopitelných a nepopsatelných vlastností modelu. Model je tedy jen přiblížení se ke skutečnosti, nikoliv její dokonalý odraz. Modely lze dělit podle jejich chování na:

\begin{itemize}
    \item spojité -- hodnoty modelu se v~průběhu simulace mění spojitě. Tyto modely jsou popsatelné diferenciálními rovnicemi
    \item diskrétní -- hodnoty modelu se v~průběhu simulace mění skokově. Tyto modely lze popsat jako konečný, nebo celulární automat
    \item kombinované -- tyto modely obsahují společně spojité a diskrétní složky vedle sebe
\end{itemize}

V~literatuře můžeme nalézt další možné rozdělení modelů \cite{IMS-skripta}.


S~takto popsanými modely je pak možné vykonávat \textit{simulace}. Během simulace se pozoruje chování modelu, vyhodnocují se výsledky simulací a případně se mění popis modelu, pokud to vyžaduje simulace, nebo pokud se přijde na nové, nečekané chování.

\subsection{Systém}
Systém je možno definovat jako soustavu částic, které na sebe vzájemně působí. Systémy se mohou dělit na:

\begin{itemize}
    \item Otevřené a uzavřené -- podle jejich interakce s~okolním prostředím
    \item Spojité a diskrétní -- podle toho, zda se hodnoty systému mění spojitě, nebo skokově
    \item Statické a dynamické -- podle toho, zda se systém vyvíjí v~čase
\end{itemize}
Pro potřeby simulací jsou využívány především dynamické systémy, u~kterých můžeme sledovat jejich vývoj v~průbehu simulace.

\subsection{Simulace}
Simulace je disciplína zabývající se získáváním informací z~modelů pomocí provádení experimentů s~nimi. Pro získání validních informací o~modelu je potřeba provést simulaci vícekrát a následně porovnat a vyhodnotit výsledné hodnoty.

Před během simulace a po vyhodnocení výsledků je vhodné provést analýzu vhodnosti modelu pro simulaci. Pokud shledáme model nevalidním, není vhodný pro náš záměr a je záhodné ho z~dalších simulací vyřadit.


Simulace můžeme rozdělovat podle mnoha kritérii:
\begin{enumerate}
    \item Podle typu použitého modelu:
        \begin{itemize}
            \item Spojitá -- rozdělení je závislé podle typu použitého modelu, viz \ref{modelovani}
            \item Diskrétní
            \item Kombinovaná
        \end{itemize}
    \item Podle zpracování výsledků:
        \begin{itemize}
            \item Kvalitativní -- v~rámci kvalitativní metody nevnímáme model jako komplexní objekt, ale zaměřujeme se pouze na pár vybraných kvalit
            \item Kvantitativní -- tato metoda zpracování je vhodná pro modely, které neumíme přesně zapsat a popsat
        \end{itemize}
    \item Podle rozložení výpočtů:
        \begin{itemize}
            \item Simulace na jednom stroji -- pro účely výpočtu je využit jen jeden výpočetní stroj. Toto využití je vhodné pro simulace jednoduššího rázu.
            \item Paralelní a distribuovaná simulace -- simulace probíhá na více strojích zároveň. Pomocí dilčího rozdělení výpočtů můžeme dosáhnout značného zrychlení v~případě složitých simulací, např. lety do kosmu.
        \end{itemize}
\end{enumerate}
Další a mnohá rozdělení simulací můžeme nalézt v~literatuře. Pro účely různých druhů simulací jsou rozdělení jiná, nemluvě o~dynamickém vývoji tohoto odvětví a tudíž i neustálým změnám v~rozdělení simulací.

\section{Popis použitých simulačních jazyků}

Jazyků umožňujících vytváření a specifikaci modelů a provádení experimentů s~nimi je na trhu nepřeberné množství \cite{list-of-process-modelling-lang}. Tyto jazyky se také liší v~případech využití - pro různé typy modelů a simulací systémů jsou jinak vhodné. Pro potřeby bakalářské práce jsem si zvolil tři programovací jazyky, z~toho dva z~kategorie simulačních jazyků, které jsou využívány vybranými volně dostupnými simulačními nástroji. Nástroje tyto jazyky používají v~čisté formě, případně jejich modifikované s~použitím podpůrných knihoven. Těmito jazyky jsou MATLAB a Modelica. Jako třetí programovací jazyk byl pro porovnání zvolen jazyk Python s~podporou matematických, vědeckých a simulačních knihoven a knihoven pro tvorbu grafů~\footnote{https://scipy.org/}.

\subsection{MATLAB}
Jazyk MATLAB je uzavřený skriptovací jazyk, který je vyvíjený a spravovaný firmou MathWorks od roku 1984. Tento jazyk je spjatý se stejnojmenným simulačním nástrojem MATLAB. Jazyk je využíván k popisu analýzy dat, k návrhu a implementaci algoritmů a také k vytváření modelů a provádění operací (simulací) s nimi. Jazyk MATLAB se vyznačuje velmi slabou typovou kontrolu a také tím, že se všemi objekty je pracováno jako s maticemu, v případě jednořádkové matice, vektoru, je s práce s touto maticí shodná s prací s polem hodnot. Většina vestavěných funkcí je pro tento účel naprogramována a očekává na svém vstupu právě matici. Syntax zápisu kódu v MATLABu připomíná kterýkoliv jiný funkcionální jazyk. Jazyk MATLAB podporuje také objektově orientované programování. Pro účely zpracování a analýzy získaných výsledků dává jazyk možnost vykreslit grafy. Všechny výsledky simulací v této práci, které jsou provedeny v MATLABu, mají vykreslené grafy právě tímto nástrojem. Výsledky můžete nalézt v kapitole \ref{kapitola6}. Prostředí MATLABu je navrženo tak, že navíc dokáže pracovat s funkcemi napsanými v jazyce C a Fortran. Zároveň má jazyk možnost využít knihovny napsané v jiných jazycích, jako jsou například Java, .NET nebo Perl.
% @TODO: obrazek MATLAB (tak na milion znaku)
\begin{figure}
    \centering
    \includegraphics[width=15cm]{obrazky-figures/dummy.png}
    \caption{Ukázka prostředí MATLAB}
    \label{fig:my_label}
\end{figure}

Tento programovací jazyk byl vybrán kvůli rozšířenosti na středních a vysokých školách, ale také na různých pracovištích zabývajícími se modelováním a simulacemi. Navzdory tomu, že nástroj MATLAB není volně dostupný, na trhu jsou k dostání volně dostupné nástroje, jako například GNU Octave a SciLab, které jsou s jazykem MATLAB kompatibilní. Dále pro MATLAB existuje rozšíření SIMULINK, které do prostředí MATLABu přidává možnost provádět vícerozměrné grafické simulace. Také tyto nástroje jsou ve výběru nástrojů využitých v této bakalářské práci.

Jazyk MATLAB bohužel není volně dostupný, nicméně v akademickém prostředí je velmi běžně k dostání, stejně jako v následné praxi. Pro účely bakalářské práce je využita studentská licence ve vlastnictví VUT FIT.


\subsection{Modelica}
Jazyk Modelica je objektově orientovaný, modelační a simulační jazyk, který je vyvíjen neziskovou organizací Modelca Association od roku 1997. Díky tomu, že je tento jazyk volně dostupný, je na trhu mnoho simulačních nástrojí a vývojových prostředí, které pracují právě s tímto jazykem. Pro účely této práce byly vybrány nástoje Dymola, OpenModelica a jModelica.org. Vývojové prostředí Dymola není, stejně jako MATLAB, volně dostupné. Pro účely provádění experimentů s tímto vývojovým prostředím je využita licence, pomocí které je možno spustit nástroj Dymola na školním serveru Merlin v rámci VUT FIT.

Modely, které jsou zapsány v jazyku Modelica, mají veškeré své chování popsané rovnicemi. Například rovnice Newtonova zákona ochlazování, který má matematický zápis:

$$
mc_p\Dot{T} = hA(T_{\infty} - T)
$$

se v jazyce Modelica zapíše naprosto totožným způsobem. Rovnice má tedy po zapsání následující tvar:

\begin{verbatim}
                        m*c_p*der(T) = h*A*(T_inf-T)
\end{verbatim}

Pro to, aby byl model funkční, je nutné definovat vstupní hodnoty jednotlivých proměnných. Zapsaná rovnice se tedy chová naprosto stejně, jako když počítáme rovnici na papíře. Použítím znaku $ = $ tedy nedochází k přiřazení, jako je to běžné u jiných programovacích jazyků, ale slouží zde jako znak pro porovnání - proto tedy ona práce s rovnicemi.

Jazyk je v současnosti velmi využíván v oblasti proudění kapalin a termodynamiky, vzhledem k jednoduchému vytvoření modelu podle předem stanovených rovnic. Dále se pak používá ve větší míře v elektrotechnice a strojírenství.
% @TODO: obrazek prostredi Modelica
\begin{figure}
    \centering
    \includegraphics[width=15cm]{obrazky-figures/dummy.png}
    \caption{Ukázka prostředí jModelica.org}
    \label{fig:my_label}
\end{figure}

Stejně jako jazyk MATLAB, i Modelica podporuje grafický přehled výsledků pomocí grafů. I v tomto případě jsou v kapitole \ref{kapitola6} grafy vytvořeny pomocí vestavěného nástroje pro tvorbu grafů v jazyce Modelica.


\subsection{Python}
Python je volně dostupný interpretovaný programovací jazyk, který má nepřeberné množství využití. Poprvé byl představen v roce 1991. Jazyk Python není v základním pojetí simulačním nebo modelačním jazykem. Tuto funkcionalitu získává teprve s dodatečnými knihovnami. V rámci využití v této bakalářské práci byla vybrána rodina knihoven SciPy. Hlavním přínosem této rodiny knihoven je možnost použití metod integrace, lineární algebry, rychlé Fourierovy transformace a řešení diferenciálních rovnic.

Tento jazyk byl zvolen z důvodu, který byl řečený výše. Python nemá primární použití jako jazyk vhodný pro modelování a simulace. Nicméně s jeho rostoucí popularitou a rostoucí uživatelskou základnou, bude jeho využití růst ještě více. Momentálně má Python velmi široký záběr pokrytí - od funkcionální, přes logické programování, až po tvorbu grafiky, databází, nebo provádění simulací. Jazyk je využíván velkými firmami na trhu, jako jsou například Google, NASA nebo Wikipedia.

Stejně jako u jazyků MATLAB a Modelica jsou grafy vykreslené v jazyce Python využity k zobrazování výsledků simulací v kapitole \ref{kapitola6}

\section{Popis použitých simulačních nástrojů}
Zde nevím, jestli by toto měla být samostatná kapitola, nebo podkapitola \ref{kapitola3}, nebo jestli tuto část klidně vynechat a raději sem dát podkapitolu o srovnávací metodice (která má samostatnou kapitolu, viz kapitola \ref{kapitola5})

\chapter{Implementace modelů}
\label{kapitola4}

\chapter{Porovnání}
\label{kapitola5}
Měl by popis srovnávací metodiky být zde, nebo v kapitole \ref{kapitola2}?

\chapter{Výsledky porovnání}
\label{kapitola6}

\chapter{Závěr}
\label{kapitola7}


%===============================================================================
